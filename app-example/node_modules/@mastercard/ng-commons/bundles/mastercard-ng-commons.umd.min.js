!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@ngx-translate/core"),require("@angular/http"),require("rxjs/operators"),require("rxjs/observable/forkJoin"),require("@angular/router"),require("rxjs/observable/of"),require("rxjs/observable/fromEvent"),require("moment"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","@ngx-translate/core","@angular/http","rxjs/operators","rxjs/observable/forkJoin","@angular/router","rxjs/observable/of","rxjs/observable/fromEvent","moment","@angular/common"],t):t((e.mastercard=e.mastercard||{},e.mastercard["ng-commons"]={}),e.ng.core,e.ng.forms,e["@ngx-translate/core"],e.ng.http,e.Rx.Observable.prototype,e.Rx.Observable,e.ng.router,e.Rx.Observable,e.Rx.Observable,e.moment,e.ng.common)}(this,function(e,t,r,n,o,i,a,s,u,c,l,p){"use strict";function d(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var v=function(){function e(){}return e.prototype.validate=function(e){return this.mcCustomValidator(e)},e}();v.decorators=[{type:t.Directive,args:[{selector:"[mcCustomValidator][ngModel]",providers:[{provide:r.NG_VALIDATORS,useExisting:t.forwardRef(function(){return v}),multi:!0}]}]}],v.ctorParameters=function(){return[]},v.propDecorators={mcCustomValidator:[{type:t.Input}]};var h=function(){function e(e,t){this.el=e,this.renderer=t,this.hasError=!1,this.errorIconElement=this.renderer.createElement("span"),this.divElement=this.renderer.createElement("div")}return e.prototype.ngOnInit=function(){var e=this.el.nativeElement.parentNode;this.renderer.addClass(this.errorIconElement,"sprite"),this.renderer.addClass(this.errorIconElement,"icon-error"),this.renderer.addClass(this.divElement,"input-icon-error-wrapper"),this.renderer.insertBefore(e,this.divElement,this.el.nativeElement),this.renderer.removeChild(e,this.el.nativeElement),this.renderer.appendChild(this.divElement,this.el.nativeElement)},e.prototype.ngOnChanges=function(){this.mcShowErrorIcon?this.addError():this.removeError()},e.prototype.addError=function(){this.renderer.appendChild(this.divElement,this.errorIconElement),this.hasError=!0},e.prototype.removeError=function(){this.hasError&&(this.renderer.removeChild(this.divElement,this.errorIconElement),this.hasError=!1)},e}();function g(e){return e}h.decorators=[{type:t.Directive,args:[{selector:"[mcShowErrorIcon]"}]}],h.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},h.propDecorators={mcShowErrorIcon:[{type:t.Input}]};var m=function(){};m.decorators=[{type:t.Directive,args:[{selector:"[mcProvideParentForm]",providers:[{provide:r.ControlContainer,useFactory:g,deps:[r.NgForm]}]}]}],m.ctorParameters=function(){return[]};var y={DEBUG:0,INFO:1,WARN:2,ERROR:3};y[y.DEBUG]="DEBUG",y[y.INFO]="INFO",y[y.WARN]="WARN",y[y.ERROR]="ERROR";var E=y.INFO;function b(){return E}var w=function(){function e(e){this.level=e}return e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.level<=y.ERROR&&console.error.apply(console,f([e],t))},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.level<=y.WARN&&console.warn.apply(console,f([e],t))},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.level<=y.INFO&&console.info.apply(console,f([e],t))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.level<=y.DEBUG&&console.log.apply(console,f([e],t))},e}();w.decorators=[{type:t.Injectable}],w.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:["LogLevel"]}]}]};var C=function(){function e(e,r){this.el=e,this.logger=r,this.ngModelChange=new t.EventEmitter,this.logger.debug("Strict Pattern Directive built")}return e.prototype.onChange=function(e){this.event&&("change"===this.event?this.validation(e):this.logger.warn("Only change event is allowed."))},e.prototype.onInput=function(e){this.event||this.validation(e)},e.prototype.validation=function(e){var t=e.target.value,r=this.el.nativeElement.attributes.getNamedItem("pattern").value;new RegExp(r).test(t)||""===t?(e.target.previousValue=e.target.value,this.logger.debug('Pattern ok. Value = "'+e.target.value+'"')):(e.target.value=e.target.previousValue||"",this.ngModelChange.emit(e.target.value),this.logger.debug('Pattern ko. Restoring value = "'+e.target.value+'"'))},e}();C.decorators=[{type:t.Directive,args:[{selector:"input[type=text][mcStrict][pattern]"}]}],C.ctorParameters=function(){return[{type:t.ElementRef},{type:w}]},C.propDecorators={event:[{type:t.Input,args:["mcStrict"]}],ngModelChange:[{type:t.Output}],onChange:[{type:t.HostListener,args:["change",["$event"]]}],onInput:[{type:t.HostListener,args:["input",["$event"]]}]};var R=function(){function e(e){this.ngModelChange=new t.EventEmitter,this.element=e.nativeElement}return e.prototype.onChange=function(e){e=e.trim(),this.element.value=e,this.ngModelChange.emit(e)},e}();R.decorators=[{type:t.Directive,args:[{selector:"input[mcTrim],textarea[mcTrim]"}]}],R.ctorParameters=function(){return[{type:t.ElementRef}]},R.propDecorators={ngModelChange:[{type:t.Output}],onChange:[{type:t.HostListener,args:["change",["$event.target.value"]]}]};var I=function(){function e(e,t,r,n){void 0===t&&(t="i18n"),void 0===r&&(r=".json"),this.http=e,this.prefix=t,this.suffix=r,this.apps=n}return e.prototype.getTranslation=function(e){var t=this,r=[],n=this.prefix,o=this.suffix;return r.push(this.http.get(n+"/"+e+"/"+e+o)),this.apps.forEach(function(i){var a=n+"/"+e+"/"+i+"_"+e+o;r.push(t.http.get(a))}),a.forkJoin.apply(void 0,f(r)).pipe(i.map(function(e){var r=e.shift(),n=r&&r.json(),o=0;return e.forEach(function(e){var r=e.json(),i=t.apps[o];n[i.toUpperCase()]=r[i.toUpperCase()],o++}),n}))},e}(),x=Object.freeze({ENGLISH:"en-US",SPANISH:"es-CO",PORTUGUESE:"pt-BR",get DEFAULT(){return this.ENGLISH}}),L="locale",O="locale",D=function(){function e(e,t){this.activated=t,this.window=e}return e.prototype.getCurrent=function(){var e=this;return u.of(x.DEFAULT).pipe(i.map(function(t){return e.window.sessionStorage.getItem(L)||t}),i.mergeMap(function(t){return e.activated?e.activated.queryParams.pipe(i.map(function(e){return e[O]||t})):u.of(t)}))},e}();function P(e){return function(t){return t.origin===e.location.origin}}function S(e){return function(t){return t.source===e}}D.decorators=[{type:t.Injectable}],D.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:["Window"]}]},{type:s.ActivatedRoute,decorators:[{type:t.Optional}]}]};var j=function(){function e(e){this.window=e,this.message$=c.fromEvent(this.window,"message").pipe(i.filter(P(e)))}return e.prototype.get=function(e){void 0===e&&(e=this.window.parent);var t=S(e);return this.message$.pipe(i.filter(t))},e.prototype.post=function(e,t){void 0===t&&(t=this.window.parent);var r=this.window.location.origin;t.postMessage(e,r)},e}();j.decorators=[{type:t.Injectable}],j.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:["Window"]}]}]};var M=l,A=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=d(t,1)[0];return n||(n="DD-MMM-YYYY hh:mm A"),M(e).format(n)},e}();A.decorators=[{type:t.Pipe,args:[{name:"dateFormat"}]}],A.ctorParameters=function(){return[]};var F=function(){function e(){this.mark="<span class='required'>*</span>"}return e.prototype.transform=function(e,t){var r=void 0===t||t.required;return e&&r?e+this.mark:e},e}();function N(){return window}F.decorators=[{type:t.Pipe,args:[{name:"requiredFieldLabel"}]}],F.ctorParameters=function(){return[]};var q=[v,R,F,m,C,h,A],U=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[w,j,D,{provide:"LogLevel",useFactory:b},{provide:"Window",useFactory:N}]}},e}();U.decorators=[{type:t.NgModule,args:[{declarations:q,imports:[p.CommonModule],exports:f(q)}]}],U.ctorParameters=function(){return[]},e.CustomValidatorDirective=v,e.ShowErrorIconDirective=h,e.formFactory=g,e.ProvideParentFormDirective=m,e.StrictPatternDirective=C,e.TrimDirective=R,e.trackByIndex=function(e){return e},e.searchValidator=function(){return function(e){var t=String(e.value||"");return/[\?\'\"\<\>\/]+/g.test(t)?{invalidCharError:!0}:null}},e.makeConfig=function(e){return{loader:{provide:n.TranslateLoader,useFactory:e,deps:[o.Http]}}},e.TranslateStaticLoader=I,e.LocaleService=D,e.LOCALE=x,e.LOCALE_STORAGE_KEY=L,e.LOCALE_QUERY_PARAM=O,e.LogLevel=y,e.getDefaultLogLevel=b,e.setDefaultLogLevel=function(e){E=e},e.Logger=w,e.filterSameOrigin=P,e.filterSameWindow=S,e.MessageService=j,e.getWindow=N,e.MastercardCommons=U,e.ɵb=A,e.ɵa=F,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mastercard-ng-commons.umd.min.js.map
